datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
  relationMode = "prisma"
}

generator client {
  provider = "prisma-client-js"
}

model Student {
  id            Int      @id @default(autoincrement())
  studentNumber String   @unique @db.VarChar(255)
  firstName     String   @db.VarChar(255)
  middleName    String?  @db.VarChar(255)
  lastName      String   @db.VarChar(255)
  extensionName String?  @db.VarChar(10)
  password      String   @db.VarChar(255)
  uploads       Upload[]
}

model Upload {
  id          Int      @id @default(autoincrement())
  title       String?  @db.VarChar(255)
  description String   @db.VarChar(255)
  type        String   @db.VarChar(100)
  link        String   @db.VarChar(255)
  instructor  Instructor @relation(fields: [instructorID], references: [id])
  instructorID Int
  subject     Subject  @relation(fields: [subjectID], references: [subjectID])
  subjectID   Int @default(1)
  student     Student  @relation(fields: [studentId], references: [id])
  studentId   Int
}

model Instructor {
  id           Int      @id @default(autoincrement())
  username     String   @unique @db.VarChar(255)
  password     String   @db.VarChar(255)
  firstName    String   @db.VarChar(255)
  middleName   String?  @db.VarChar(255)
  lastName     String   @db.VarChar(255)
  extensionName String?  @db.VarChar(10)
  uploads      Upload[]
  subjects     InstructorSubject[]
}

model Subject {
  subjectID Int    @id @default(autoincrement())
  title     String @db.VarChar(255)
  uploads   Upload[]
  instructors InstructorSubject[]
}

model InstructorSubject {
  instructor   Instructor @relation(fields: [instructorId], references: [id])
  instructorId Int
  subject      Subject    @relation(fields: [subjectId], references: [subjectID])
  subjectId    Int
  assignedAt  DateTime  @default(now())

  @@id([instructorId, subjectId])
}

model Admin {
  adminID  Int    @id @default(autoincrement()) 
  username String @unique @db.VarChar(255) @default("admin")
  password String @db.VarChar(255) @default("admin")
}